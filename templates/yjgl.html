{% extends 'base.html' %}
{% load staticfiles %}
{% block head %}
    <title>报警管理</title>
{% endblock %}
{% block menu %}
    <li class="header">菜单 MENU</li>
    <li class="">
        <a href="/index/">
            <i class="fa fa-home" style="font-size: 22px"></i> <span>首页</span>
        </a>
    </li>
    <li class="treeview">
        <a href="#">
            <i class="fa fa-sliders"></i>
            <span>机房管理</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
        </a>
        <ul class="treeview-menu">
            <li><a href="fwqjg.html">&nbsp;&nbsp;&nbsp;&nbsp;服务器机柜</a></li>
            <li><a href="jkjg.html">&nbsp;&nbsp;&nbsp;&nbsp;监控机柜</a></li>
            <li><a href="ccjg.html">&nbsp;&nbsp;&nbsp;&nbsp;存储机柜</a></li>
            <li><a href="/pdjg/">&nbsp;&nbsp;&nbsp;&nbsp;配电柜</a></li>
            <li><a href="/jmkt/">&nbsp;&nbsp;&nbsp;&nbsp;精密空调</a></li>
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;UPS</a></li>
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;消防系统</a></li>
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;漏水监测</a></li>
        </ul>
    </li>
    <li class="treeview">
        <a href="#">
            <i class="fa fa-magnet"></i>
            <span>指挥室管理</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
        </a>
        <ul class="treeview-menu">
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;显示屏</a></li>
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;指挥室空调</a></li>
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;显示屏空调</a></li>
            <li><a href="xyxgpj.html">&nbsp;&nbsp;&nbsp;&nbsp;漏水监测</a></li>
        </ul>
    </li>
    <li>
        <a href="yxjc.html">
            <i class="fa fa-print"></i> <span>运行监测</span>
        </a>
    </li>
    <li class="active">
        <a href="/yjgl/">
            <i class="fa fa-bell"></i> <span>预警管理</span>
        </a>
    </li>
    <li class="treeview">
        <a href="#">
            <i class="fa fa-gears"></i>
            <span>设备管理</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
        </a>
        <ul class="treeview-menu">
            <li class=""><a href="/shebruk/">&nbsp;&nbsp;&nbsp;&nbsp;设备入库</a></li>
            <li><a href="sbjx.html">&nbsp;&nbsp;&nbsp;&nbsp;设备检修</a></li>
            <li><a href="sbbf.html">&nbsp;&nbsp;&nbsp;&nbsp;设备报废</a></li>
            <li><a href="sbcx.html">&nbsp;&nbsp;&nbsp;&nbsp;设备查询</a></li>
        </ul>
    </li>
    <li>
        <a href="xtjc.html">
            <i class="fa fa-map"></i> <span>系统集成</span>
        </a>
    </li>
{% endblock %}
{% block info %}
    <section class="content-header">
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
            <li class="active">预警管理</li>
        </ol>
    </section>
    <div class="content qqq">
        <div class="yjgl">
            <div class="ssjc_right_up">
                <div class="nei">
                    <div class="ssjc_ru_title">
                  <span class="left_ten">
                    预警查询
                  </span>
                        <span class="float_right">
                        <span class="tiaoshijian">
                    开始时间：
                    <input type="date">
                    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
                    <span class="tiaoshijian">
                    结束时间：
                    <input type="date">
                    <i class="glyphicon glyphicon-calendar fa fa-calendar" style="left:86px;"></i></span>
                  <span>
                  预警级别
                    <select class="biaoti_select">
                <option value="甲级">甲级</option>
                <option value="乙级">乙级</option>
                <option value="丙级">丙级</option>
              </select>
                  </span>
                  <span>
                  处理状态：
                    <select class="biaoti_select">
                <option value="处理完成">处理完成</option>
                <option value="正在处理">正在处理</option>
                <option value="待处理">待处理</option>
              </select>
                  </span>

              <span class="right_ten">
                    <input type="submit" value="查询" class="youcecha">
                  </span>
                  </span>
                        <div class="clear"></div>
                    </div>
                    <div class="yjgl_ru_table">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="echarts_yjgl_one" id="echarts_yjgl_one">
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="echarts_yjgl_two" id="echarts_yjgl_two">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ssjc_right_bottom">
                    <div class="nei">
                        <p>数据列表</p>
                        <div class="ssjc_rub_table">
                            <table class="tj_table" border="0">
                                <thead>
                                <tr>
                                    <td>序号</td>
                                    <td>报警时间</td>
                                    <td>报警类型</td>
                                    {#      <td>设备名称</td>#}
                                    <td>报警信息</td>
                                    {#      <td>处理意见</td>#}
                                    {#      <td>处理状态</td>#}
                                    {#      <td>操作</td>#}
                                </tr>
                                </thead>
                                <tbody>
                                {% for bj in bjxx %}
                                    <tr>
                                        <td>{{ bj.id }}</td>
                                        <td>{{ bj.bjshij }}</td>
                                        <td>{{ bj.get_bjlx_display }}</td>
                                        <td>{{ bj.bjxx }}</td>
                                    </tr>
                                {% endfor %}
                                </tbody>

                            </table>
                            <div class="t_fanye">
                                {{ page }}
                                <span class="page_info_three">当前{{ cuont.0 }}-{{ cuont.1 }}条记录，共{{ cuont.2 }}条记录</span>
                                <div class="clear"></div>
                            </div>
                        </div>
                        <div class="cheng_ershi"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#xuanshi1').daterangepicker({singleDatePicker: true}, function (start, end, label) {
                console.log(start.toISOString(), end.toISOString(), label);
            });
            $('#xuanshi2').daterangepicker({singleDatePicker: true}, function (start, end, label) {
                console.log(start.toISOString(), end.toISOString(), label);
            });
        });
    </script>
    <script type="text/javascript">

        /* 第一个图 */

        var myChart1 = echarts.init(document.getElementById('echarts_yjgl_one'));
        option1 = {
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },
            title: {
                text: '  预警管理',
                left: 'left',
                textStyle: {
                    color: '#fff',
                    fontSize: 14,
                    fontWeight: 'normal'
                },
                padding: 13
            },
            textStyle: {color: '#fff'},
            legend: {
                orient: 'vertical',
                right: '2%',
                top: '5%',
                data: ['非工作时间用电', '电压过高', '电流过高'],
                textStyle: {color: '#fff'}
            },
            series: [{
                name: '响应方案比例',
                type: 'pie',
                radius: ['30%', '70%'],
                center: ['35%', '50%'],
                avoidLabelOverlap: false,
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '20',
                            fontWeight: 'bold',
                            color: '#fff'
                        }
                    }
                },
                data: [
                    {value: 6, name: '非工作时间用电'},
                    {value: 2, name: '电压过高'},
                    {value: 1, name: '电流过高'},],
                color: ['#55c45f', '#ff6b6b', '#4eb7cd']
            }]
        };
        myChart1.setOption(option1);


        /* 第二个图 */
        var myChart2 = echarts.init(document.getElementById('echarts_yjgl_two'));
        option2 = {
            title: {
                text: '  设备报警时间分析：2016年08日01日—2016年08日12日',
                left: 'center',
                textStyle: {
                    color: '#fff',
                    fontSize: 14,
                    fontWeight: 'normal'
                },
                padding: 13
            },
            legend: {
                bottom: '2%',
                data: ['设备报警']
            },
            textStyle: {color: '#fff'},
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c}'
            },
            xAxis: {
                type: 'category',
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(43,46,56,0.8)'
                    }
                },
                data: ['1日', '2日', '3日', '4日', '5日', '6日', '7日', '8日', '9日', '10日', '11日', '12日']
            },
            yAxis: {
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(43,46,56,0.8)'
                    }
                },
                scale: true
            },
            grid: {
                top: '13%',
                left: '3%',
                right: '4%',
                bottom: '15%',
                containLabel: true
            },
            series: [
                {
                    name: '设备报警',
                    type: 'line',
                    data: [1, 0, 3, 0, 0, 3, 0, 0, 0, 0, 2, 0],
                    symbol: 'circle',
                    symbolSize: 10,
                    lineStyle: {normal: {color: '#ff6b6b'}}
                }]
        };
        myChart2.setOption(option2);

        myChart1.resize();
        myChart2.resize();
        window.addEventListener("resize", function () {
            myChart1.resize();
            myChart2.resize();
        });
    </script>
{% endblock %}
{% block custom_js %}
    <script src="/static/vince/js/echarts.js"></script>
{% endblock %}